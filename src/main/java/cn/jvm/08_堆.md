# 08_堆

## 核心概述

1. 一个**JVM实例**只存在**一个堆**，堆是Java内存管理最大的一块核心区域。
2. Java堆区在JVM启动的候即被创建，其空间大小也就确定了，但可以在**创建前调整**大小。
3. 《Java虚拟机规范》规定，堆可以处于**物理上不连续**的内存空间，但**逻辑上连续**。
4. 所有的线程共享Java堆，堆还可以被划分为**线程私有缓冲区**（Thread Local Allocation Buffer, TLAB）。
5. 《Java虚拟机规范》中对Java堆的描述是

   * **从设计初衷来讲**所有的对象实例以及数组都应当在运行时分配到堆上。（The heap is the run-time data area from which memory for **~~all~~** class instances and arrays is allocated）

   * 从实际角度看，这里讲的应当是**几乎（almost）**，对象**可能**出现在栈上。

   * **从设计初衷来讲**，数组和对象可能永远不会存储在栈上，因为栈帧中保存引用，这个引用指向对象或数组**在堆中的位置**。
6. 方法结束后，堆中的对象**不会立即被移除**，仅在垃圾回收的时候才被移除。
7. **堆**是垃圾收集器（Garbage Collector）执行**垃圾回收的重点区域**。

